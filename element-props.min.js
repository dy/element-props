export const parse=(e,t)=>(t=t===Object?JSON.parse:t===Array?e=>JSON.parse("["===e[0]?e:`[${e}]`):t,""===e&&t!==String||(t?t(e):!e||isNaN(+e)?e:+e)),prop=(e,r,a)=>{r.startsWith("on")&&(r=r.toLowerCase()),e[r]!==a&&(e[r]=a),!1===a||null==a?e.removeAttribute(r):"function"!=typeof a&&e.setAttribute(t(r),!0===a?"":"number"==typeof a||"string"==typeof a?a:"class"===r?(Array.isArray(a)?a:Object.entries(a).map((([e,t])=>t?e:""))).filter(Boolean).join(" "):"style"===r?Object.entries(a).map((([e,t])=>`${e}: ${t}`)).join(";"):"")},input=e=>["checkbox"===e.type?()=>e.checked:()=>e.value,"text"===e.type||""===e.type?t=>e.value=null==t?"":t:"checkbox"===e.type?t=>(e.value=t?"on":"",prop(e,"checked",t)):"select-one"===e.type?t=>([...e.options].map((e=>e.removeAttribute("selected"))),e.value=t,e.selectedOptions[0]?.setAttribute("selected","")):t=>e.value=t];export default(e,r,a)=>{const o="INPUT"===e.tagName||"SELECT"===e.tagName,[s,n]=input(e),l=new Proxy(e.attributes,{get:(a,n,l)=>o&&"value"===n?s():n in e?e[n]:(l=a[t(n)])&&(l.call?l:parse(l.value,r?.[n])),set:(t,s,l)=>(o&&"value"===s?n(l):prop(e,s,parse(l,r?.[s])),a?.(s,l,t),1),deleteProperty:(t,r,a)=>(e.removeAttribute(r),e[r]=a,delete e[r]),getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),ownKeys:t=>Array.from(new Set([...Object.keys(e),...Object.getOwnPropertyNames(t)].filter((t=>e[t]!==l&&isNaN(+t)))))});return o&&n(s()),l};const e=document.createElement("div"),t=t=>{e.dataset[t]="";let r=e.attributes[0].name.slice(5);return delete e.dataset[t],r};